<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Liza Bolton (Guest Lecturer)">
<meta name="dcterms.date" content="2025-01-01">

<title>Advanced Biological Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="runsheet_03_files/libs/clipboard/clipboard.min.js"></script>
<script src="runsheet_03_files/libs/quarto-html/quarto.js"></script>
<script src="runsheet_03_files/libs/quarto-html/popper.min.js"></script>
<script src="runsheet_03_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="runsheet_03_files/libs/quarto-html/anchor.min.js"></script>
<link href="runsheet_03_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="runsheet_03_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="runsheet_03_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="runsheet_03_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="runsheet_03_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>

      .quarto-title-block .quarto-title-banner {
        background: #c7dbe2;
      }
</style>
<script src="runsheet_03_files/libs/fitvids-2.1.1/fitvids.min.js"></script>


</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Advanced Biological Data Analysis</h1>
            <p class="subtitle lead">BIOSCI 738</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Liza Bolton (Guest Lecturer) </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Waipapa Taumata Rau University of Auckland
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#notes" id="toc-notes" class="nav-link active" data-scroll-target="#notes">Notes</a></li>
  <li><a href="#march-17th" id="toc-march-17th" class="nav-link" data-scroll-target="#march-17th">March 17th</a>
  <ul class="collapse">
  <li><a href="#slides" id="toc-slides" class="nav-link" data-scroll-target="#slides">Slides</a></li>
  <li><a href="#rough-timeline" id="toc-rough-timeline" class="nav-link" data-scroll-target="#rough-timeline">Rough timeline</a></li>
  </ul></li>
  <li><a href="#sec-coc2" id="toc-sec-coc2" class="nav-link" data-scroll-target="#sec-coc2">Group discussion: Codes of conduct</a></li>
  <li><a href="#case-studies" id="toc-case-studies" class="nav-link" data-scroll-target="#case-studies">Case studies</a>
  <ul class="collapse">
  <li><a href="#case-1" id="toc-case-1" class="nav-link" data-scroll-target="#case-1">Case 1</a></li>
  <li><a href="#case-2" id="toc-case-2" class="nav-link" data-scroll-target="#case-2">Case 2</a></li>
  <li><a href="#case-3" id="toc-case-3" class="nav-link" data-scroll-target="#case-3">Case 3</a></li>
  </ul></li>
  <li><a href="#finished-early" id="toc-finished-early" class="nav-link" data-scroll-target="#finished-early">Finished early?</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></p>
<section id="notes" class="level1">
<h1>Notes</h1>
<p>All BIOSCI 738 lectures require your <strong>active involvement</strong>! See the <a href="https://biosci738.github.io/BIOSCI738/key-information.html#course-policies">course policies</a> for further infomation.</p>
<p>Throughout this runsheet you’ll find a number of different callout boxes:</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
this box will contain the expected learning objectives and/or outcomes for the material
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
this box will contain some useful information
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa fa-question-circle" aria-hidden="true"></i> <i class="fa fa-users" aria-hidden="true"></i> <i class="fa fa-pencil-square" aria-hidden="true"></i> this box will ask you discuss/write/sketch an answer within your randomly allocated group
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<section id="first-things-first" class="level3">
<h3 class="anchored" data-anchor-id="first-things-first">First things first…</h3>
<p>Note the <strong>randomly allocated group</strong> mentioned above. Each lecture I’ll have run the following <code>R</code> function that randomly allocates you into groups. <strong>It’s your responsibility to get into them, just look for the cows!</strong></p>
<center>
<a href="https://biosci738.github.io/cowstats/"><img src="https://raw.githubusercontent.com/BIOSCI738/cowstats/main/img/coxhex.png" alt="BIOSCI738 hex" width="200" height="200"></a>
</center>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>group_allocation <span class="ot">&lt;-</span> <span class="cf">function</span>(names, seed, <span class="at">groups =</span> <span class="dv">9</span> ){</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(seed)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">sample</span>(names, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(tmp, <span class="fu">cut</span>(<span class="fu">seq_along</span>(tmp), groups, <span class="at">labels =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, <span class="dv">1</span><span class="sc">:</span>groups))) </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Accessing activities
</div>
</div>
<div class="callout-body-container callout-body">
<p>Scan the QR code below, I have provided links to both this runsheet and the slides.</p>
<center>
<p>
<a href="link.lizabolton.com" target="_blank">link.lizabolton.com</a>
</p>
<img src="img/slide-qr.png" alt="qr code">
</center>
</div>
</div>
</section>
</section>
<section id="march-17th" class="level1">
<h1>March 17th</h1>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
By the end of today’s seminar, you will be able to:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Recognise that while individuals (and societies) may have different opinions and approaches to ethics, but we can use codes of conduct to support our professional ethical decision making.</li>
<li>Describe some of the values, principles, responsibilities, and standards from the Royal Society Te Apārangi Code of Professional Standards and Ethics in Science, Technology, and the Humanities.</li>
<li>Describe how ethical decisions can appear throughout different stages of study and research in biology.</li>
<li>Identify issues and provide advice for ethical decision making in biology contexts.</li>
</ul>
</div>
</div>
<section id="slides" class="level2">
<h2 class="anchored" data-anchor-id="slides">Slides</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>xaringanExtra<span class="sc">::</span><span class="fu">embed_xaringan</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://lizabolton.github.io/2025-biosci738-ethics/#/title-slide"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ratio =</span> <span class="st">"16:9"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">"2px solid currentColor"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_width =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">margin =</span> <span class="st">"1em auto"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">style =</span> <span class="cn">NULL</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="shareagain" style="min-width:300px;margin:1em auto;" data-exeternal="1">
<iframe src="https://lizabolton.github.io/2025-biosci738-ethics/#/title-slide" width="1600" height="900" style="border:2px solid currentColor;" loading="lazy" allowfullscreen=""></iframe>
<script>fitvids('.shareagain', {players: 'iframe'});</script>
</div>
</div>
</div>
</section>
<section id="rough-timeline" class="level2">
<h2 class="anchored" data-anchor-id="rough-timeline">Rough timeline</h2>
<ul>
<li><strong>09:05–09:20 AM</strong> Introduction (see slides)</li>
<li><strong>09:20–09:55 AM</strong> Your ethical experiences and codes of conduct <a href="#sec-coc2" class="quarto-xref">Section&nbsp;3</a>
<ul>
<li>Group discussion</li>
<li>Class discussion</li>
<li>Start on ethical data practices and introduction to the case studies (see slides) if time</li>
</ul></li>
<li><strong>09:55–10:05 am</strong> Break</li>
<li><strong>10.05–10.20 am</strong> Ethical data practices and introduction to the case studies (see slides)</li>
<li><strong>10.15–10.45 am</strong> Case studies
<ul>
<li>Groups work through the case studies</li>
<li>Class discussion</li>
</ul></li>
<li><strong>10.45–10.55 am</strong> Wrap-up (and Code of Conduct meme-off if anyone has enough time to make them)</li>
</ul>
<section id="randomly-allocated-groups" class="level3">
<h3 class="anchored" data-anchor-id="randomly-allocated-groups">Randomly allocated groups</h3>
<p><strong>It’s your responsibility to get into these, just look for the cows!</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">group_allocation</span>(names, <span class="at">seed =</span> <span class="dv">1992</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`Group 1`
[1] "He Li"       "Ziyi Wang"   "Shuxiang He" "Yutong Wang"

$`Group 2`
[1] "Zhixiao Zhang" "Yutao Yang"    "Tongzheng Yao" "Karie Labidon"

$`Group 3`
[1] "Happy Liang"                  "Antonia Schebek-Fuerstenberg"
[3] "Congkai Meng"                 "YOGAPRIYA S"                 

$`Group 4`
[1] "Jiaxin Liu" "Sunny Chen" "Anqi Cheng" "Leyang Liu"

$`Group 5`
[1] "Zichang Li"            "Robert Mihok"          "Pikitangarangi Ratapu"

$`Group 6`
[1] "Bayu Pitandoyo"   "Emma Akeroyd"     "Charlotte Sutton" "Yue Ma"          

$`Group 7`
[1] "Laura Munck"        "Barnaby Clegg-Shaw" "Xinyue Zhang"      
[4] "Jianing Chen"      

$`Group 8`
[1] "Alex Johnson" "Lana Najar"   "Yi Han"       "Angel Loh"   

$`Group 9`
[1] "Yingyi Wang" "Julia Thain" "Keyi Sun"    "Shoule Du"  </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="sec-coc2" class="level1">
<h1>Group discussion: Codes of conduct</h1>
<ol type="1">
<li><p>What experiences have you had with ethical decisions as a student and/or early career researcher and/or employee?</p></li>
<li><p>Read over the <a href="https://www.royalsociety.org.nz/assets/Uploads/Code-Overview-A3-web.pdf">Royal Society Te Apārangi</a> Code of Professional Standards and Ethics in Science, Technology, and the Humanities.</p></li>
<li><p>Describe a possible workflow for biological research. Come up with possible ethical decisions for each stage.</p></li>
</ol>
<section id="sec-bonus" class="level3">
<h3 class="anchored" data-anchor-id="sec-bonus">Bonus activity</h3>
<p>If you have time (now or in the second half), do one of the following:</p>
<ul>
<li>Rewrite one of the values &amp; principles of responsibility &amp; standards using the most intense slang you can (Gen-Z, 80s valley girl, up to you, just keep it ‘family friendly’).</li>
</ul>
<p>OR</p>
<ul>
<li>Make a cheesy motivational poster / ‘hopecore’ edit for one of the principles from the <a href="https://www.royalsociety.org.nz/assets/Uploads/Code-Overview-A3-web.pdf">Royal Society Te Apārangi Code</a>
<ul>
<li>There is a generator you can use <a href="https://bighugelabs.com/motivator.php">here</a> (and you can get free photos from <a href="https://unsplash.com/">Unsplash</a>)</li>
</ul></li>
</ul>
<p><img src="img/nonmaleficence.jpg" class="img-fluid"></p>
</section>
</section>
<section id="case-studies" class="level1">
<h1>Case studies</h1>
<p>For each of the following case studies, discuss the situation and identify potential ethical issues. For some, you may need to run the associated code in R.</p>
<section id="case-1" class="level2">
<h2 class="anchored" data-anchor-id="case-1">Case 1</h2>
<p>A mine has been accused of managing their tailings poorly, causing dangerous chemicals to enter the nearby swamp. Local councillors, S. Hrek and D. Onkey, have complained that it is bad for the Hochstetter’s frog | Pangokereia living there and you have been hired by the mine to help them combat these allegations.</p>
<p>You are contracted to measuring the weight of the frogs in the area, with the idea that if the frogs are unhealthy, their weight will be lower than was found in a previous survey of the area. That previous study found that the average weight of the Hochstetter’s frogs in this location is 6.5 grams.</p>
<p>While you are catching and measuring the live frogs, you notice that there are not many juvenile frogs (‘froglets’) despite it being the season when many should be maturing from tadpoles into adult frogs. As Hochstetter’s frogs mature their colouring darkens and you notice that most of the frogs have quite dark colouring.</p>
<p>You can run the below code to find the mean weight of the frogs you studied and perform a t-test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The weights of 30 frogs</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>frog_weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">5.6</span>, <span class="fl">8.7</span>, <span class="fl">6.1</span>, <span class="fl">6.2</span>, <span class="fl">5.1</span>, <span class="fl">6.8</span>, <span class="fl">6.8</span>, <span class="fl">6.5</span>, <span class="fl">7.0</span>, <span class="fl">7.5</span>, <span class="fl">6.3</span>, <span class="fl">5.8</span>, <span class="fl">6.3</span>, <span class="fl">7.1</span>, <span class="fl">6.9</span>, <span class="fl">6.4</span>, <span class="fl">8.3</span>, <span class="fl">7.4</span>, <span class="fl">7.6</span>, <span class="fl">6.8</span>, <span class="fl">7.3</span>, <span class="fl">9.1</span>, <span class="fl">8.1</span>, <span class="fl">6.8</span>, <span class="fl">6.1</span>, <span class="fl">6.8</span>, <span class="fl">6.9</span>, <span class="fl">7.2</span>, <span class="fl">7.2</span>, <span class="fl">7.5</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the average weight in this sample</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(frog_weights)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># One sample t-test, one sided</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(frog_weights, <span class="at">mu =</span> <span class="fl">6.5</span>, <span class="at">alternative =</span> <span class="st">"less"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Look up R documentation
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can run <code>?t.test</code> in your R console to see the documentation for the basic t-test used above.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa fa-question-circle" aria-hidden="true"></i> <i class="fa fa-users" aria-hidden="true"></i> <i class="fa fa-pencil-square" aria-hidden="true"></i> In the <a href="https://docs.google.com/document/d/1QC44oQvFROL-UI1yZu9xvhP8OnG1TFbWBYFmGVJMZSM/edit?usp=sharing">Google Doc</a>…
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write the null and alternative hypothesis for this test in context.</p>
</div>
</div>
<p>A mine executive is very relieved by your results and interprets them as indicating that the frogs are doing very well as they are even larger and healthier than they were before.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa fa-question-circle" aria-hidden="true"></i> <i class="fa fa-users" aria-hidden="true"></i> <i class="fa fa-pencil-square" aria-hidden="true"></i> In the <a href="https://docs.google.com/document/d/1QC44oQvFROL-UI1yZu9xvhP8OnG1TFbWBYFmGVJMZSM/edit?usp=sharing">Google Doc</a>…
</div>
</div>
<div class="callout-body-container callout-body">
<p>As a group, identify some possible issues with this interpretation based on limitations of your data collection. Write a short explanation for the mine executive about how these issues could affect the interpretation of your result.</p>
</div>
</div>
</section>
<section id="case-2" class="level2">
<h2 class="anchored" data-anchor-id="case-2">Case 2</h2>
<p>You have been hired to work with a local iwi to collect data on the locations and habits of a rare albino kiwi bird with a distincitve call. Data is collected across an array of microphones and is used to create a location heat map for where the kiwi spends time.</p>
<p>The iwi are kaitiaki (caretakers) of the area where this kiwi lives. They are also worried about increasing attempts from tourists and others to get pictures of this rare bird and how this risks disturbing and destressing the animal, risking its health and that of other kiwi in the area.</p>
<p>You finish up the work and your clients are very happy with it, especially complimentary about the data visualisation showing the common locations the kiwi visits by longitude and latitude.</p>
<p>You are preparing an update to your CV to apply for a job, and you notice that transperancy and open data practices are key values of the research institute you are applying to. You write a blog post for your website outlining your findings from the kiwi research, clearly outline the data collection processes, analytical choices, and limitations. You create a public GitHub repository that provides all the code and data to create the location heat maps.</p>
<p>You’re about to press publish so you can link to it in your application, but a little voice in your head stops you…</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa fa-question-circle" aria-hidden="true"></i> <i class="fa fa-users" aria-hidden="true"></i> <i class="fa fa-pencil-square" aria-hidden="true"></i> In the <a href="https://docs.google.com/document/d/1QC44oQvFROL-UI1yZu9xvhP8OnG1TFbWBYFmGVJMZSM/edit?usp=sharing">Google Doc</a>…
</div>
</div>
<div class="callout-body-container callout-body">
<p>Be the little voice in your head. Is it right to publish this? Make some arguments about potential risks and principles to consider.</p>
</div>
</div>
</section>
<section id="case-3" class="level2">
<h2 class="anchored" data-anchor-id="case-3">Case 3</h2>
<p>Concerns have been raised that a off-roading adventure course has caused vegetation loss and increased the risk of wind erosion due to exposed soil. The area where the course has been developed is a large, flat tussock grassland in the South Island. The grassland is fairly similar throughout, and has not been disturbed other than the dirt track for the off-road vehicles to travel on — this area is not included in the coverage measures.</p>
<p>High resolution drone photography of the area has been used to estimate vegetation coverage both close to the course and further away in the undisturbed grassland. To gather the data, 100 meter lines parallel to the course, spaced every 5 meters, are drawn on the aerial imagery. Five one meter square areas are randomly chosen along each line and the vegetation coverage estimated using an appropriate machine learning tool.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa fa-question-circle" aria-hidden="true"></i> <i class="fa fa-users" aria-hidden="true"></i> <i class="fa fa-pencil-square" aria-hidden="true"></i> In the <a href="https://docs.google.com/document/d/1QC44oQvFROL-UI1yZu9xvhP8OnG1TFbWBYFmGVJMZSM/edit?usp=sharing">Google Doc</a>…
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Run the following code to load the data and view the visualisation provided in a report about the impact of the road on the local vegetation.</p></li>
<li><p>Write down (bullet points are fine) about some of the specific choices made when presenting this data.</p></li>
<li><p>Create your own version of this visualisation, seeking to answer the question about whether the adventure course appears to have had an impact on the vegetation coverage.</p></li>
</ol>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You need the library tidyverse installed to run this code</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>veg_cov <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist_from_road =</span> <span class="fu">c</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">15</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>, <span class="dv">25</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">45</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">55</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">65</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>, <span class="dv">75</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">85</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">90</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>, <span class="dv">95</span>,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">100</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">coverage =</span> <span class="fu">c</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="fl">27.9</span>, <span class="fl">22.5</span>, <span class="dv">27</span>, <span class="fl">21.8</span>, <span class="fl">29.6</span>, <span class="fl">29.2</span>, <span class="dv">21</span>, <span class="fl">21.7</span>, <span class="fl">29.9</span>, <span class="fl">28.5</span>, <span class="fl">26.7</span>, <span class="fl">29.4</span>, <span class="fl">20.6</span>, <span class="fl">26.2</span>, <span class="fl">21.7</span>, <span class="fl">20.4</span>, <span class="fl">25.3</span>, <span class="fl">22.8</span>, <span class="dv">25</span>, <span class="fl">26.3</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="fl">20.1</span>, <span class="fl">26.1</span>, <span class="fl">27.8</span>, <span class="fl">29.2</span>, <span class="fl">22.9</span>, <span class="fl">27.9</span>, <span class="fl">25.7</span>, <span class="fl">27.8</span>, <span class="fl">27.1</span>, <span class="fl">26.7</span>, <span class="fl">29.3</span>, <span class="fl">25.1</span>, <span class="fl">27.5</span>, <span class="fl">28.4</span>, <span class="fl">28.7</span>, <span class="fl">21.9</span>, <span class="fl">22.2</span>, <span class="fl">26.5</span>, <span class="fl">23.4</span>, <span class="fl">25.1</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="fl">26.5</span>, <span class="fl">29.7</span>, <span class="fl">25.1</span>, <span class="fl">20.6</span>, <span class="fl">21.5</span>, <span class="fl">26.4</span>, <span class="dv">21</span>, <span class="fl">27.7</span>, <span class="fl">24.1</span>, <span class="fl">28.7</span>, <span class="fl">27.7</span>, <span class="fl">26.5</span>, <span class="fl">26.3</span>, <span class="fl">28.3</span>, <span class="fl">21.3</span>, <span class="fl">28.8</span>, <span class="fl">22.4</span>, <span class="fl">26.5</span>, <span class="fl">22.3</span>, <span class="fl">20.7</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="fl">21.3</span>, <span class="fl">56.9</span>, <span class="fl">33.7</span>, <span class="fl">57.5</span>, <span class="fl">40.4</span>, <span class="fl">25.3</span>, <span class="fl">52.8</span>, <span class="fl">56.9</span>, <span class="dv">58</span>, <span class="fl">42.3</span>, <span class="dv">41</span>, <span class="fl">41.4</span>, <span class="fl">58.7</span>, <span class="fl">41.1</span>, <span class="fl">41.3</span>, <span class="fl">44.8</span>, <span class="fl">56.9</span>, <span class="fl">29.1</span>, <span class="fl">57.1</span>, <span class="fl">57.2</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="fl">40.9</span>, <span class="fl">59.6</span>, <span class="fl">22.6</span>, <span class="fl">54.5</span>, <span class="fl">39.2</span>, <span class="fl">41.4</span>, <span class="fl">36.6</span>, <span class="fl">29.1</span>, <span class="fl">59.3</span>, <span class="fl">46.2</span>, <span class="fl">43.2</span>, <span class="fl">25.6</span>, <span class="fl">47.9</span>, <span class="fl">49.9</span>, <span class="fl">58.1</span>, <span class="fl">25.2</span>, <span class="dv">46</span>, <span class="fl">48.3</span>, <span class="dv">24</span>, <span class="fl">22.8</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="fl">31.2</span>, <span class="fl">49.4</span>, <span class="fl">58.5</span>, <span class="fl">52.6</span>, <span class="fl">36.7</span>, <span class="fl">38.2</span>, <span class="fl">34.5</span>, <span class="fl">21.8</span>, <span class="fl">48.8</span>, <span class="fl">55.2</span>, <span class="fl">75.3</span>, <span class="fl">51.7</span>, <span class="fl">64.7</span>, <span class="fl">70.4</span>, <span class="fl">55.5</span>, <span class="fl">59.1</span>, <span class="fl">74.5</span>, <span class="fl">77.4</span>, <span class="fl">76.3</span>, <span class="fl">76.5</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="fl">59.7</span>, <span class="fl">59.4</span>, <span class="fl">74.7</span>, <span class="fl">50.2</span>, <span class="fl">50.5</span>, <span class="fl">51.1</span>, <span class="fl">51.4</span>, <span class="fl">79.3</span>, <span class="fl">78.8</span>, <span class="fl">71.2</span>, <span class="fl">73.6</span>, <span class="dv">71</span>, <span class="fl">59.4</span>, <span class="fl">66.4</span>, <span class="fl">79.2</span>, <span class="fl">65.9</span>, <span class="fl">60.5</span>, <span class="fl">78.8</span>, <span class="fl">51.7</span>, <span class="fl">57.2</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="fl">67.5</span>, <span class="fl">55.3</span>, <span class="fl">53.8</span>, <span class="fl">65.1</span>, <span class="fl">70.6</span>, <span class="fl">73.1</span>, <span class="fl">51.2</span>, <span class="fl">75.3</span>, <span class="fl">70.8</span>, <span class="fl">72.3</span>, <span class="dv">66</span>, <span class="fl">56.6</span>, <span class="fl">67.3</span>, <span class="fl">66.3</span>, <span class="fl">73.9</span>, <span class="fl">56.5</span>, <span class="fl">57.5</span>, <span class="fl">75.1</span>, <span class="fl">68.5</span>, <span class="dv">59</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="dv">76</span>, <span class="fl">60.6</span>, <span class="fl">69.2</span>, <span class="fl">75.8</span>, <span class="fl">61.8</span>, <span class="fl">60.8</span>, <span class="fl">62.7</span>, <span class="dv">66</span>, <span class="fl">65.8</span>, <span class="fl">60.1</span>, <span class="fl">55.8</span>, <span class="fl">74.1</span>, <span class="fl">60.8</span>, <span class="dv">79</span>, <span class="fl">53.8</span>, <span class="fl">73.7</span>, <span class="fl">56.2</span>, <span class="fl">57.3</span>, <span class="fl">77.1</span>, <span class="fl">53.6</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="fl">61.9</span>, <span class="fl">71.9</span>, <span class="fl">71.8</span>, <span class="fl">51.8</span>, <span class="fl">68.7</span>, <span class="fl">66.4</span>, <span class="fl">65.6</span>, <span class="fl">77.5</span>, <span class="fl">76.1</span>, <span class="fl">66.4</span>, <span class="fl">58.7</span>, <span class="fl">71.2</span>, <span class="fl">78.1</span>, <span class="fl">51.1</span>, <span class="fl">64.3</span>, <span class="fl">51.4</span>, <span class="fl">65.3</span>, <span class="fl">50.5</span>, <span class="fl">50.5</span>, <span class="fl">61.8</span>, <span class="fl">56.3</span>, <span class="fl">64.9</span>, <span class="dv">50</span>, <span class="fl">61.3</span>, <span class="fl">64.8</span>, <span class="fl">57.7</span>, <span class="fl">60.8</span>, <span class="fl">62.6</span>,<span class="fl">65.4</span>,<span class="dv">69</span>))</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(veg_cov, <span class="fu">aes</span>(<span class="at">x =</span> dist_from_road, <span class="at">y =</span> coverage)) <span class="sc">+</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">formula =</span> <span class="st">'y ~ x'</span>, <span class="at">col=</span><span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Distance from road (m)"</span>, <span class="at">y =</span> <span class="st">"Coverage (%)"</span>,</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Vegetation coverage near to roading project similar to surrounding area"</span>) <span class="sc">+</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(<span class="fu">print</span>(plot))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="finished-early" class="level1">
<h1>Finished early?</h1>
<p>Work on the <a href="@sec-bonus">bonus activity</a>.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>